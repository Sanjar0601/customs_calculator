# üá∫üáø Customs Calculator API
**REST API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ —Ç–∞–º–æ–∂–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –†–µ—Å–ø—É–±–ª–∏–∫–∏ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω.**

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ–¥–æ–≤ –¢–ù –í–≠–î, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç–∞–≤–æ–∫ —Å Lex.uz, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –¶–ë –†–£–∑ –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ä–∞—Å—Ç–∞–º–æ–∂–∫–∏, –≤–∫–ª—é—á–∞—è —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É —É—Ç–∏–ª–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –¥–ª—è –∞–≤—Ç–æ—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞.

## üî• –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
### ‚ö° –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –¢–ù –í–≠–î:

- –ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É (–ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã–π).

- –ü–æ–∏—Å–∫ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é (Fuzzy Search / Trigram similarity) ‚Äî –Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ–≤–∞—Ä—ã –¥–∞–∂–µ –ø—Ä–∏ –æ–ø–µ—á–∞—Ç–∫–∞—Ö.

### üí∞ –ü–æ–ª–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–ª–∞—Ç–µ–∂–µ–π:

- **–ò–º–ø–æ—Ä—Ç–Ω–∞—è –ø–æ—à–ª–∏–Ω–∞**: –ê–¥–≤–∞–ª–æ—Ä–Ω—ã–µ, —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ, –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ —Å–º–µ—à–∞–Ω–Ω—ã–µ —Å—Ç–∞–≤–∫–∏.

- **–ê–∫—Ü–∏–∑–Ω—ã–π –Ω–∞–ª–æ–≥**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞–ª—é—Ç–Ω—ã—Ö –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫.

- **–ù–î–°**: 12% –æ—Ç –Ω–∞–ª–æ–≥–æ–æ–±–ª–∞–≥–∞–µ–º–æ–π –±–∞–∑—ã.

- **–¢–∞–º–æ–∂–µ–Ω–Ω—ã–π —Å–±–æ—Ä**: –†–∞—Å—á–µ—Ç –ø–æ —à–∫–∞–ª–µ –ë–†–í —Å–æ–≥–ª–∞—Å–Ω–æ –ü–ö–ú ‚Ññ55.

- **–£—Ç–∏–ª–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–±–æ—Ä**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –¥–ª—è –∞–≤—Ç–æ—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ (M1, N, —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∞) —Å —É—á–µ—Ç–æ–º –≤–æ–∑—Ä–∞—Å—Ç–∞ (—Å—Ç–∞—Ä—à–µ/–º–ª–∞–¥—à–µ 3 –ª–µ—Ç), —Ç–∏–ø–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è (—ç–ª–µ–∫—Ç—Ä–æ/–î–í–°) –∏ –æ–±—ä–µ–º–∞.

### üåç –†–µ–∂–∏–º—ã —Ç–æ—Ä–≥–æ–≤–ª–∏: 
–£—á–µ—Ç —Å—Ç—Ä–∞–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è (–ó–æ–Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏, —Ä–µ–∂–∏–º –Ω–∞–∏–±–æ–ª—å—à–µ–≥–æ –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç—Å—Ç–≤–æ–≤–∞–Ω–∏—è, –≥–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º).

### üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:

- –ü–∞—Ä—Å–∏–Ω–≥ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫ —Å **Lex.uz**.

- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç —Å **CBU.uz**.

--- 

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Language**: Python 3.11

- **Framework**: FastAPI

- **Database**: PostgreSQL 15 + SQLModel (SQLAlchemy)

- **Migrations**: Alembic

- **Data Processing**: Pandas, BeautifulSoup4

- **Infrastructure**: Docker, Docker Compose
  
---
## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker)
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ Docker –∏ Docker Compose.

**1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```Bash

git clone https://github.com/Sanjar0601/customs_calculator
cd CustomsCalculator

```
**2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä):

```Bash

cp .env.example .env

```

*Docker Compose* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç –Ω—É–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.


**3. –ó–∞–ø—É—Å–∫**

```bash

docker-compose up --build

```
  –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
  1. –°–æ–∑–¥–∞—Å—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î.
  2. –°–ø–∞—Ä—Å–∏—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –¢–ù –í–≠–î, —Å—Ç—Ä–∞–Ω—ã –∏ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç.
  3. –ó–∞–≥—Ä—É–∑–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ –ø–æ—à–ª–∏–Ω —Å Lex.uz. –≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 1-2 –º–∏–Ω—É—Ç—ã.

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

## üîå API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger UI) –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: üëâ http://localhost:8000/docs

–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞ (CURL)
**POST** ```/api/v1/calculate```

–†–∞—Å—Ç–∞–º–æ–∂–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è (2.5 –ª–∏—Ç—Ä–∞, –Ω–æ–≤—ã–π, 180 –ª.—Å., —Ü–µ–Ω–∞ $25,000):

```JSON
{
  "tn_code": "8703231981",
  "customs_value": 25000,
  "weight_kg": 1800,
  "quantity_pcs": 1,
  "volume_cm3": 2500,
  "manufacturing_year": 2024,
  "power_hp": 180,
  "origin_country_code": "CN"
}
```

**–û—Ç–≤–µ—Ç (–ü—Ä–∏–º–µ—Ä):**

```JSON

{
  "tn_code": "8703231981",
  "currency_rate": 12059.78,
  "brv_rate": 412000,
  "total_payments_usd": 16234.77,
  "total_payments_uzs": 195787800,
  "details": [
    {
      "name": "–ò–º–ø–æ—Ä—Ç–Ω–∞—è –ø–æ—à–ª–∏–Ω–∞",
      "rate_source": "15.0% + 1.0 $/cm3",
      "amount_usd": 6250,
      "amount_uzs": 75373625
    },
    {
      "name": "–ù–î–° (12.0%)",
      "rate_source": "12% –æ—Ç (–°—Ç–æ–∏–º–æ—Å—Ç—å + –ü–æ—à–ª–∏–Ω–∞ + –ê–∫—Ü–∏–∑)",
      "amount_usd": 3750,
      "amount_uzs": 45224175
    },
    {
      "name": "–¢–∞–º–æ–∂–µ–Ω–Ω—ã–π —Å–±–æ—Ä",
      "rate_source": "–°–±–æ—Ä –∑–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ (2.5 –ë–†–í) –ø–æ –ü–ö–ú ‚Ññ55",
      "amount_usd": 85.41,
      "amount_uzs": 1030000
    },
    {
      "name": "–£—Ç–∏–ª–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–±–æ—Ä",
      "rate_source": "–£—Ç–∏–ª—å—Å–±–æ—Ä (–õ–µ–≥–∫–æ–≤–æ–π (V=2500.0 —Å–º3), –¥–æ 3 –ª–µ—Ç): 180 –ë–†–í",
      "amount_usd": 6149.37,
      "amount_uzs": 74160000
    }
  ],
  "error": null
}
```
## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```Plaintext

.
‚îú‚îÄ‚îÄ app
‚îÇ   ‚îú‚îÄ‚îÄ api          # –†–æ—É—Ç—ã (Endpoints)
‚îÇ   ‚îú‚îÄ‚îÄ core         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ models       # SQLModel –º–æ–¥–µ–ª–∏ (–¢–∞–±–ª–∏—Ü—ã –ë–î)
‚îÇ   ‚îú‚îÄ‚îÄ schemas      # Pydantic —Å—Ö–µ–º—ã (–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
‚îÇ   ‚îî‚îÄ‚îÄ services     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ       ‚îú‚îÄ‚îÄ calculator.py   # –û—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ —Ä–∞—Å—á–µ—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ importers       # –õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ CSV/JSON –≤ –ë–î
‚îÇ       ‚îî‚îÄ‚îÄ parsers         # –°–∫—Ä–∞–ø–µ—Ä—ã Lex.uz –∏ CBU
‚îú‚îÄ‚îÄ media            # –•—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (CSV, JSON)
‚îú‚îÄ‚îÄ scripts          # –°–∫—Ä–∏–ø—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (init_db.py)
‚îî‚îÄ‚îÄ static           # –§—Ä–æ–Ω—Ç–µ–Ω–¥ (HTML/JS)
```
## üìÑ License
MIT
